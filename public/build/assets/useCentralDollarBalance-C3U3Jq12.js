import{r as o}from"./app-QTctwzMn.js";const E=(t=0)=>{const[n,r]=o.useState(t||0),[c,s]=o.useState(!1),[u,l]=o.useState(null),f=async()=>{s(!0),l(null);try{const e=await fetch("/api/employee/dollar-balance/current",{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}});if(e.ok){const a=await e.json();return r(a.current_balance||0),a.current_balance||0}else throw new Error("فشل في جلب رصيد الدولار")}catch(e){return console.error("Error fetching dollar balance:",e),l(e.message),n}finally{s(!1)}},p=e=>{e!=null&&r(parseFloat(e)||0)},d=e=>{r(a=>(parseFloat(a)||0)+(parseFloat(e)||0))},m=(e=0)=>{r(parseFloat(e)||0)};return o.useEffect(()=>{t!=null&&r(parseFloat(t)||0)},[t]),{centralDollarBalance:parseFloat(n)||0,isLoading:c,error:u,fetchCurrentDollarBalance:f,updateBalanceAfterTransaction:p,adjustBalance:d,resetBalance:m,setCentralDollarBalance:r}};export{E as u};
