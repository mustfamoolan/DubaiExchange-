import{r as n}from"./app-BdEaxmMx.js";function p(c=0){const[r,a]=n.useState(c),[l,s]=n.useState(!1),d=e=>{a(e)},o=async()=>{try{s(!0);const e=await fetch("/api/cash-balance/current",{headers:{Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""}});if(e.ok){const t=await e.json();return a(t.current_balance||0),t.current_balance||0}}catch(e){console.error("خطأ في جلب الرصيد النقدي المركزي:",e)}finally{s(!1)}return r},u=e=>{a(e),window.dispatchEvent(new CustomEvent("cashBalanceUpdated",{detail:{newBalance:e}}))};return n.useEffect(()=>{const e=t=>{a(t.detail.newBalance)};return window.addEventListener("cashBalanceUpdated",e),()=>{window.removeEventListener("cashBalanceUpdated",e)}},[]),n.useEffect(()=>{c===0&&o()},[]),{centralCashBalance:r,setCentralCashBalance:d,updateBalanceAfterTransaction:u,fetchCurrentCashBalance:o,isUpdating:l}}export{p as u};
