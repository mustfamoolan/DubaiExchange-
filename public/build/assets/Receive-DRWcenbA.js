import{r as o,j as e,b as xe}from"./app-DxR0okzA.js";import{E as ue}from"./EmployeeLayout-DpsBh24u.js";import{u as ge,T as he}from"./ThermalReceipt-pwkwjH3z.js";import{u as pe,R as be}from"./ReceiveExchangeThermalReceipt-K3M12ShB.js";/* empty css            */function _e({user:G,currentBalance:K=0,openingBalance:k=0,transactions:fe=[],quickReport:h={received_today:0,operations:0,total_received:0,total_exchanged:0}}){const[U,R]=o.useState(K),[X,E]=o.useState(!1),[i,D]=o.useState({received_today:h.received_today,operations:h.operations,total_received:h.total_received,total_exchanged:h.total_exchanged}),{showReceipt:B,receiptData:F,printReceipt:Q,closeReceipt:z}=ge(),{showReceipt:J,receiptData:L,createReceiptAndSave:W,printReceipt:Y,closeReceipt:H}=pe(),[r,d]=o.useState({documentNumber:"",currentTime:new Date().toLocaleString("ar-EG"),receivedFrom:"",selectedCustomer:null,amount:"",currency:"",exchange_rate:"",description:"",receiverName:G?.name||"Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø­Ø§Ù„ÙŠ",notes:""}),[c,T]=o.useState(""),[y,M]=o.useState([]),[j,p]=o.useState([]),[v,m]=o.useState(!1),[V,O]=o.useState(!1),[Z,b]=o.useState(!1),[l,x]=o.useState({name:"",phone:"",opening_balance_iqd:"0",opening_balance_usd:"0"}),[f,q]=o.useState(!1),[A,N]=o.useState(""),[ee,w]=o.useState("");o.useEffect(()=>{const t=()=>{const n=new Date().toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});w(n)};t();const s=setInterval(t,1e3);return()=>clearInterval(s)},[]),o.useEffect(()=>{(()=>{const s=new Date,a=s.getFullYear().toString()+(s.getMonth()+1).toString().padStart(2,"0")+s.getDate().toString().padStart(2,"0"),n=Math.floor(Math.random()*1e3).toString().padStart(3,"0");N(`REC${a}${n}`)})()},[]),o.useEffect(()=>{d(t=>({...t,documentNumber:A}))},[A]);const te=["Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ","Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ","ÙŠÙˆØ±Ùˆ","Ø¬Ù†ÙŠÙ‡ Ø§Ø³ØªØ±Ù„ÙŠÙ†ÙŠ","Ù„ÙŠØ±Ø© ØªØ±ÙƒÙŠØ©","Ø¯ÙˆÙ„Ø§Ø± Ø£Ø³ØªØ±Ø§Ù„ÙŠ","Ø¯ÙˆÙ„Ø§Ø± ÙƒÙ†Ø¯ÙŠ","ÙŠÙˆØ§Ù† ØµÙŠÙ†ÙŠ","ÙŠÙ† ÙŠØ§Ø¨Ø§Ù†ÙŠ","ÙƒØ±ÙˆÙ†Ø§ Ø³ÙˆÙŠØ¯ÙŠØ©","ÙƒØ±ÙˆÙ†Ø§ Ù†Ø±ÙˆÙŠØ¬ÙŠØ©","ÙƒØ±ÙˆÙ†Ø§ Ø¯Ù†Ù…Ø§Ø±ÙƒÙŠØ©","Ù…Ø§Ù†Ø§Øª Ø£Ø°Ø±Ø¨ÙŠØ¬Ø§Ù†","Ø¯Ø±Ù‡Ù… Ø¥Ù…Ø§Ø±Ø§ØªÙŠ","Ø¯ÙŠÙ†Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ","Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ","Ø±ÙŠØ§Ù„ Ù‚Ø·Ø±ÙŠ","Ù„ÙŠØ±Ø© Ù„Ø¨Ù†Ø§Ù†ÙŠØ©","Ø¬Ù†ÙŠÙ‡ Ù…ØµØ±ÙŠ","Ø¯ÙŠÙ†Ø§Ø± ÙƒÙˆÙŠØªÙŠ","Ø¯ÙŠÙ†Ø§Ø± Ø¨Ø­Ø±ÙŠÙ†ÙŠ","Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©","Ø±ÙŠØ§Ù„ Ø¥ÙŠØ±Ø§Ù†ÙŠ"],g=(t,s)=>{d(a=>{const n={...a,[t]:s};return t==="currency"&&s==="Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ"&&(n.exchange_rate="1"),n})},re=async()=>{O(!0);try{const t=await fetch("/api/customers/search",{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}});if(t.ok){const s=await t.json();M(s.customers||[]),p(s.customers||[])}}catch(t){console.error("Error fetching customers:",t)}finally{O(!1)}},se=t=>{if(T(t),d(a=>({...a,receivedFrom:t,selectedCustomer:null})),t.trim()===""){p(y),m(!1);return}const s=y.filter(a=>a.name.toLowerCase().includes(t.toLowerCase())||a.phone.includes(t)||a.customer_code.toLowerCase().includes(t.toLowerCase()));p(s),m(!0)},I=t=>{d(s=>({...s,receivedFrom:t.name,selectedCustomer:t})),T(t.name),m(!1)},ae=async()=>{try{console.log("Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ - Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø©:",{name:l.name,phone:l.phone,opening_balance_iqd:l.opening_balance_iqd||"0",opening_balance_usd:l.opening_balance_usd||"0"});const t=await fetch("/api/customers",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({name:l.name,phone:l.phone,opening_balance_iqd:l.opening_balance_iqd||"0",opening_balance_usd:l.opening_balance_usd||"0"})});if(console.log("Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø¯Ù… - Ø­Ø§Ù„Ø©:",t.status),t.ok){const s=await t.json();console.log("Ù†Ø¬Ø­ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„:",s);const a=s.customer;M(n=>[a,...n]),p(n=>[a,...n]),I(a),b(!1),x({name:"",phone:"",opening_balance_iqd:"0",opening_balance_usd:"0"}),alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!")}else{const s=await t.json();console.error("Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„:",s),alert(s.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„")}}catch(t){console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©:",t),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©")}},$=()=>{x(t=>({...t,name:c})),b(!0),m(!1)};o.useEffect(()=>{re()},[]),o.useEffect(()=>{const t=s=>{v&&!s.target.closest(".relative")&&m(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[v]);const[u,ne]=o.useState(null),oe=async()=>{try{const t=await fetch("/employee/receive/detailed-report",{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(t.ok){const s=await t.json();return ne(s),s}else return console.error("ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…ÙØµÙ„"),null}catch(t){return console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚Ø±ÙŠØ±:",t),null}},le=async()=>{E(!0),u||await oe()},ce=async()=>{const t=r.currency!=="Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ";if(!r.receivedFrom||!r.amount||!r.currency||t&&!r.exchange_rate)throw new Error("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");if(parseFloat(r.amount)<=0)throw new Error("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­");if(t&&parseFloat(r.exchange_rate)<=0)throw new Error("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ±Ù ØµØ­ÙŠØ­");const s=await fetch("/employee/receive",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({documentNumber:r.documentNumber,receivedFrom:r.receivedFrom,selectedCustomer:r.selectedCustomer,amount:r.amount,currency:r.currency,exchange_rate:r.exchange_rate,description:r.description,beneficiary:"Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†Ù‚Ø¯ÙŠ",notes:r.notes})});if(s.ok){const a=await s.json();R(a.new_balance),a.updated_report&&D({received_today:a.updated_report.received_today,operations:a.updated_report.operations,total_received:a.updated_report.total_received,total_exchanged:a.updated_report.total_exchanged}),d(C=>({...C,receivedFrom:"",amount:"",currency:"",exchange_rate:"",description:"",notes:"",currentTime:new Date().toLocaleString("ar-EG")}));const n=new Date,_=n.getFullYear().toString()+(n.getMonth()+1).toString().padStart(2,"0")+n.getDate().toString().padStart(2,"0"),S=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return N(`REC${_}${S}`),w(n.toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),a}else{const a=await s.json();throw new Error(a.message||"Ø­Ø¯Ø« Ø®Ø·Ø£")}},ie=async()=>{const t=r.currency!=="Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ";if(!r.receivedFrom||!r.amount||!r.currency||t&&!r.exchange_rate){alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");return}if(parseFloat(r.amount)<=0){alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­");return}if(t&&parseFloat(r.exchange_rate)<=0){alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ±Ù ØµØ­ÙŠØ­");return}q(!0);try{const s=await fetch("/employee/receive",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({documentNumber:r.documentNumber,receivedFrom:r.receivedFrom,selectedCustomer:r.selectedCustomer,amount:r.amount,currency:r.currency,exchange_rate:r.exchange_rate,description:r.description,beneficiary:"Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†Ù‚Ø¯ÙŠ",notes:r.notes})});if(s.ok){const a=await s.json();R(a.new_balance),a.updated_report&&D({received_today:a.updated_report.received_today,operations:a.updated_report.operations,total_received:a.updated_report.total_received,total_exchanged:a.updated_report.total_exchanged}),d(C=>({...C,receivedFrom:"",amount:"",currency:"",exchange_rate:"",description:"",notes:"",currentTime:new Date().toLocaleString("ar-EG")}));const n=new Date,_=n.getFullYear().toString()+(n.getMonth()+1).toString().padStart(2,"0")+n.getDate().toString().padStart(2,"0"),S=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return N(`REC${_}${S}`),w(n.toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),alert("ØªÙ… Ø­ÙØ¸ Ø³Ù†Ø¯ Ø§Ù„Ù‚Ø¨Ø¶ Ø¨Ù†Ø¬Ø§Ø­!"),a}else{const a=await s.json();return alert(a.message||"Ø­Ø¯Ø« Ø®Ø·Ø£"),{success:!1,error:a.message}}}catch(s){return console.error("Error:",s),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©"),{success:!1,error:s.message}}finally{q(!1)}},de=async()=>{const t=r.currency!=="Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ";if(!r.receivedFrom||!r.amount||!r.currency||t&&!r.exchange_rate){alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");return}const s=Math.floor(parseFloat(r.amount||0)*parseFloat(r.exchange_rate||1)),a=await W(ce,{reference_number:r.documentNumber,employee_name:r.receiverName,person_name:r.receivedFrom,currency:r.currency,amount:r.amount,exchange_rate:r.exchange_rate||"1",amount_in_iqd:s,beneficiary:"Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†Ù‚Ø¯ÙŠ",description:r.description,notes:r.notes},"receive");a&&a.success&&console.log("ØªÙ… Ø­ÙØ¸ Ø³Ù†Ø¯ Ø§Ù„Ù‚Ø¨Ø¶ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ù…Ø®ØµØµØ© Ø¨Ù†Ø¬Ø§Ø­")},me=()=>{xe.visit("/employee/dashboard")},P=()=>{const t=r.currency!=="Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ";return r.receivedFrom&&r.amount&&r.currency&&(!t||r.exchange_rate)};return e.jsxs(ue,{title:"Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù‚Ø¨Ø¶",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:me,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200",children:[e.jsx("span",{children:"â†"}),e.jsx("span",{children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("span",{className:"text-2xl text-green-600",children:"ğŸ“"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ (Ù†Ù‚Ø¯Ø§Ù‹)"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsxs("p",{className:"text-3xl font-bold text-green-700",children:[Math.floor(U).toLocaleString()," Ø¯.Ø¹"]})]}),e.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠ:"}),e.jsxs("span",{className:"font-bold text-gray-800",children:[k>0?Math.floor(k).toLocaleString():"0"," Ø¯.Ø¹"]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"}),e.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Ù…Ø³ØªÙ„Ù… Ø§Ù„ÙŠÙˆÙ…:"}),e.jsxs("span",{className:"font-bold text-green-800",children:[i.received_today>0?Math.floor(i.received_today).toLocaleString():"0"," Ø¯.Ø¹"]})]})}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ„Ù…:"}),e.jsxs("span",{className:"font-bold text-blue-800",children:[i.total_received>0?Math.floor(i.total_received).toLocaleString():"0"," Ø¯.Ø¹"]})]})}),e.jsx("div",{className:"bg-red-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-red-700",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙ:"}),e.jsxs("span",{className:"font-bold text-red-800",children:[i.total_exchanged>0?Math.floor(i.total_exchanged).toLocaleString():"0"," Ø¯.Ø¹"]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:"}),e.jsx("span",{className:"font-bold text-gray-800",children:i.operations})]})})]}),e.jsx("button",{onClick:le,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-4 rounded-xl transition-colors duration-200 mt-6",children:"ØªÙ‚Ø±ÙŠØ± Ù…ÙØµÙ„"})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ø³Ù†Ø¯ Ù‚Ø¨Ø¶"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯:"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right bg-gray-50",value:r.documentNumber,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª:"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right bg-gray-50",value:ee,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…:"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right bg-gray-50",value:r.receiverName,readOnly:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø§Ø³ØªÙ„Ù…Øª Ù…Ù† Ø§Ù„Ø³ÙŠØ¯: *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",placeholder:"Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø¬Ø¯ÙŠØ¯...",value:c,onChange:t=>se(t.target.value),onFocus:()=>{y.length>0&&c&&m(!0)}}),V&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-green-500 border-t-transparent rounded-full"})}),r.selectedCustomer&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})})]}),v&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:j.length>0?e.jsxs(e.Fragment,{children:[j.map(t=>e.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 text-right",onClick:()=>I(t),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-left",children:e.jsx("span",{className:"text-xs text-gray-500",children:t.customer_code})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-600",children:t.phone})]})]})},t.id)),c&&!j.some(t=>t.name.toLowerCase()===c.toLowerCase())&&e.jsxs("div",{className:"px-4 py-3 bg-green-50 hover:bg-green-100 cursor-pointer border-t border-green-200 text-center text-green-700 font-medium",onClick:$,children:[e.jsx("svg",{className:"w-4 h-4 inline-block ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),'Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯: "',c,'"']})]}):c?e.jsxs("div",{className:"px-4 py-3 bg-green-50 hover:bg-green-100 cursor-pointer text-center text-green-700 font-medium",onClick:$,children:[e.jsx("svg",{className:"w-4 h-4 inline-block ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),'Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯: "',c,'"']}):e.jsx("div",{className:"px-4 py-3 text-center text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„Ø§Ø¡"})}),r.selectedCustomer&&e.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg text-right",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-left",children:e.jsx("span",{className:"text-xs font-medium text-green-700",children:r.selectedCustomer.customer_code})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-900",children:r.selectedCustomer.name}),e.jsx("div",{className:"text-sm text-green-700",children:r.selectedCustomer.phone})]})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center bg-white p-2 rounded",children:[e.jsx("div",{className:"text-gray-600",children:"Ø§Ù„Ø±ØµÙŠØ¯ USD"}),e.jsxs("div",{className:"font-bold text-green-700",children:["$",r.selectedCustomer.current_usd_balance||"0.00"]})]}),e.jsxs("div",{className:"text-center bg-white p-2 rounded",children:[e.jsx("div",{className:"text-gray-600",children:"Ø§Ù„Ø±ØµÙŠØ¯ IQD"}),e.jsxs("div",{className:"font-bold text-green-700",children:[parseInt(r.selectedCustomer.current_iqd_balance||0).toLocaleString()," Ø¯.Ø¹"]})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø§Ù„Ù…Ø¨Ù„Øº: *"}),e.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº",value:r.amount,onChange:t=>g("amount",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø§Ù„Ø¹Ù…Ù„Ø©: *"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",value:r.currency,onChange:t=>g("currency",t.target.value),children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø©"}),te.map((t,s)=>e.jsx("option",{value:t,children:t},s))]})]}),r.currency!=="Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù: *"}),e.jsx("input",{type:"number",step:"0.0001",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",value:r.exchange_rate,onChange:t=>g("exchange_rate",t.target.value),placeholder:"Ø£Ø¯Ø®Ù„ Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù"})]}),r.amount&&r.exchange_rate&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ø¹Ø±Ø§Ù‚ÙŠ:"}),e.jsxs("div",{className:"w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-right",children:[Math.floor(parseFloat(r.amount||0)*parseFloat(r.exchange_rate||0)).toLocaleString()," Ø¯.Ø¹"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"ÙˆØ°Ù„Ùƒ Ø¹Ù†:"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",rows:"3",placeholder:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³Ø¨Ø¨ Ø£Ùˆ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª...",value:r.description,onChange:t=>g("description",t.target.value)})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",rows:"2",placeholder:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ø®Ø±Ù‰...",value:r.notes,onChange:t=>g("notes",t.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:de,disabled:f||!P(),className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200 flex items-center justify-center",children:[e.jsx("span",{className:"ml-2",children:"ğŸ–¨ï¸"}),f?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...":"Ø­ÙØ¸ ÙˆØ·Ø¨Ø§Ø¹Ø©"]}),e.jsxs("button",{onClick:ie,disabled:f||!P(),className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200 flex items-center justify-center",children:[e.jsx("span",{className:"ml-2",children:"ğŸ’¾"}),f?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...":"Ø­ÙØ¸"]})]})]})})]})]}),B&&F&&e.jsx(he,{receiptData:F,onClose:z,onPrint:Q}),J&&L&&e.jsx(be,{receiptData:L,receiptType:"receive",onClose:H,onPrint:Y}),X&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…ÙØµÙ„ - Ø³Ù†Ø¯Ø§Øª Ø§Ù„Ù‚Ø¨Ø¶"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"Ã—"})]})}),e.jsx("div",{className:"p-6",children:u?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:[u.summary?.total_amount?.toLocaleString()||"0"," Ø¯.Ø¹"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:u.summary?.total_transactions||0})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-purple-800",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„Ø§Øª"}),e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:u.summary?.currencies?.length||0})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-right",children:"Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Ø§Ù„Ù…Ø³ØªÙ„Ù… Ù…Ù†"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Ø§Ù„Ø¹Ù…Ù„Ø©"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Ø§Ù„Ù…Ø³ØªÙÙŠØ¯"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:u.transactions?.map((t,s)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:t.document_number}),e.jsx("td",{className:"px-4 py-2",children:t.received_from}),e.jsx("td",{className:"px-4 py-2 font-semibold",children:Number(t.amount).toLocaleString()}),e.jsx("td",{className:"px-4 py-2",children:t.currency}),e.jsx("td",{className:"px-4 py-2",children:t.beneficiary}),e.jsx("td",{className:"px-4 py-2",children:t.formatted_date})]},s))})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±..."})]})})]})}),Z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„: *"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„",value:l.name,onChange:t=>x(s=>({...s,name:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: *"}),e.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",placeholder:"Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ",value:l.phone,onChange:t=>x(s=>({...s,phone:t.target.value}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠ USD"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",placeholder:"0.00 (ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø³Ø§Ù„Ø¨)",value:l.opening_balance_usd,onChange:t=>x(s=>({...s,opening_balance_usd:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠ IQD"}),e.jsx("input",{type:"number",step:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-right",placeholder:"0 (ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø³Ø§Ù„Ø¨)",value:l.opening_balance_iqd,onChange:t=>x(s=>({...s,opening_balance_iqd:t.target.value}))})]})]}),e.jsxs("div",{className:"flex space-x-3 space-x-reverse pt-4",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{onClick:ae,disabled:!l.name||!l.phone,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…ÙŠÙ„"})]})]})]})})})]})}export{_e as default};
