import{r as n}from"./app-BeG86g_S.js";const F=(t=0)=>{const[o,r]=n.useState(t||0),[l,c]=n.useState(!1),[f,a]=n.useState(null),p=async()=>{if(l)return o;c(!0),a(null);try{const e=await fetch("/api/employee/dollar-balance/current",{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},signal:AbortSignal.timeout(1e4)});if(e.ok){const s=await e.json(),u=parseFloat(s.current_balance)||0;return r(u),u}else return console.warn("فشل في جلب رصيد الدولار، سيتم استخدام القيمة الحالية"),a("فشل في تحديث الرصيد"),o}catch(e){return console.error("Error fetching dollar balance:",e),e.name==="TimeoutError"?a("انتهت مهلة الاتصال"):e.name==="AbortError"?a("تم إلغاء الطلب"):a(e.message||"خطأ في الشبكة"),o}finally{c(!1)}},d=e=>{e!=null&&r(parseFloat(e)||0)},i=e=>{r(s=>(parseFloat(s)||0)+(parseFloat(e)||0))},m=(e=0)=>{r(parseFloat(e)||0)};return n.useEffect(()=>{t!=null&&r(parseFloat(t)||0)},[t]),{centralDollarBalance:parseFloat(o)||0,isLoading:l,error:f,fetchCurrentDollarBalance:p,updateBalanceAfterTransaction:d,adjustBalance:i,resetBalance:m,setCentralDollarBalance:r}};export{F as u};
