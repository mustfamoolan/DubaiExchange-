import{r as t}from"./app-DlBU8k81.js";function h(r=0){const[n,a]=t.useState(r),[d,c]=t.useState(!1),u=e=>{a(e)},o=async()=>{try{c(!0);const e=await fetch("/api/employee/cash-balance/current",{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}});if(e.ok){const s=await e.json(),l=parseFloat(s.current_balance)||0;return a(l),l}else return console.warn("فشل في جلب الرصيد، سيتم استخدام القيمة الحالية"),n}catch(e){return console.error("خطأ في جلب الرصيد النقدي المركزي:",e),n}finally{c(!1)}},i=e=>{a(e),window.dispatchEvent(new CustomEvent("cashBalanceUpdated",{detail:{newBalance:e}}))};return t.useEffect(()=>{const e=s=>{a(s.detail.newBalance)};return window.addEventListener("cashBalanceUpdated",e),()=>{window.removeEventListener("cashBalanceUpdated",e)}},[]),t.useEffect(()=>{r===0&&o()},[]),{centralCashBalance:n,setCentralCashBalance:u,updateBalanceAfterTransaction:i,fetchCurrentCashBalance:o,isUpdating:d}}export{h as u};
