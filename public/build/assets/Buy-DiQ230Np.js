import{r as o,j as e,d as ye}from"./app-DWkI_n4f.js";import{E as je}from"./EmployeeLayout-DAHgDOm5.js";import{u as Ne,T as ve}from"./ThermalReceipt-B8ew9Q0Y.js";import{u as we}from"./useCentralCashBalance-DJoO0gvH.js";import{u as Se}from"./useCentralDollarBalance-bXNAENqy.js";import{u as _e,N as Re}from"./useNotification-CqnDnbxa.js";/* empty css            */function Ie({user:L,currentDollarBalance:z=0,currentIQDBalance:Q=0,currentCashBalance:A=0,currentCentralDollarBalance:H=0,openingDollarBalance:D=0,openingIQDBalance:k=0,openingCashBalance:T=0,exchangeRate:F=1500,transactions:Me=[],quickReport:y={charges:0,payments:0,operations:0,dollars_bought:0}}){const[Ce,$]=o.useState(z),[Le,E]=o.useState(Q),[Ae,B]=o.useState(A),[u,I]=o.useState({charges:y.charges,payments:y.payments,operations:y.operations,dollars_bought:y.dollars_bought}),{centralCashBalance:p,updateBalanceAfterTransaction:O}=we(A),{centralDollarBalance:Z,updateBalanceAfterTransaction:P}=Se(H),[r,b]=o.useState({documentNumber:"",currentTime:new Date().toLocaleString("ar-EG"),dollarAmount:"",exchangeRate:F,notes:"",employeeName:L?.name||"Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø­Ø§Ù„ÙŠ"}),[j,N]=o.useState(!1),[q,S]=o.useState(""),[ee,_]=o.useState(""),[te,R]=o.useState(!1),[l,U]=o.useState(null),[ae,Y]=o.useState(!1),[x,G]=o.useState(1),[m]=o.useState(50),[g,se]=o.useState(1),{showReceipt:re,receiptData:V,createBuyReceipt:ne,printReceipt:oe,closeReceipt:le}=Ne(),{notification:h,showSuccess:K,showError:i,showWarning:ce,closeNotification:ie}=_e();o.useEffect(()=>{const t=()=>{const n=new Date().toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});_(n)};t();const a=setInterval(t,1e3);return()=>clearInterval(a)},[]),o.useEffect(()=>{(()=>{const a=new Date,s=a.getFullYear().toString()+(a.getMonth()+1).toString().padStart(2,"0")+a.getDate().toString().padStart(2,"0"),n=Math.floor(Math.random()*1e3).toString().padStart(3,"0");S(`BUY${s}${n}`)})()},[]),o.useEffect(()=>{b(t=>({...t,documentNumber:q}))},[q]),o.useEffect(()=>{(r.dollarAmount||r.exchangeRate)&&(parseFloat(r.dollarAmount||0),parseFloat(r.exchangeRate||0))},[r.dollarAmount,r.exchangeRate]);const W=t=>{const s=t.toString().replace(/[^0-9.]/g,"").split(".");return s.length>2?s[0]+"."+s.slice(1).join(""):(s[1]&&(s[1]=s[1].replace(/0+$/,""),s[1]===""&&s.pop()),s[0]&&(s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,",")),s.join("."))},X=t=>t.toString().replace(/,/g,""),de=(t,a)=>{const s=X(a);b(n=>({...n,[t]:s}))},J=(t,a)=>{const s=X(a);b(n=>({...n,[t]:s}))},M=()=>{const t=parseFloat(r.dollarAmount)||0,a=parseFloat(r.exchangeRate)||0;return a>0?t*a:0},xe=()=>M(),C=()=>{const t=String(r.dollarAmount||"").trim(),a=String(r.exchangeRate||"").trim(),s=parseFloat(t),n=parseFloat(a);if(!t||isNaN(s)||s<=0||!a||isNaN(n)||n<=0)return null;const c=Math.round(s*n),d=Math.round(p);if(c>d){const f=c-d;return`Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‚Ø¯ÙŠ ØºÙŠØ± ÙƒØ§ÙÙŠ. Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: ${c.toLocaleString()} Ø¯.Ø¹ØŒ Ø§Ù„Ù…ØªØ§Ø­: ${d.toLocaleString()} Ø¯.Ø¹ØŒ Ø§Ù„Ù†Ù‚Øµ: ${f.toLocaleString()} Ø¯.Ø¹`}return null},v=()=>{const t=String(r.dollarAmount||"").trim(),a=String(r.exchangeRate||"").trim(),s=parseFloat(t),n=parseFloat(a);if(!t||isNaN(s)||s<=0||!a||isNaN(n)||n<=0)return!1;const c=Math.round(s*n),d=Math.round(p);return c<=d},me=async()=>{if(!v()){if(!r.dollarAmount||parseFloat(r.dollarAmount)<=0)i("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª","ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±");else if(!r.exchangeRate||parseFloat(r.exchangeRate)<=0)i("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª","ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ±Ù ØµØ­ÙŠØ­");else{const t=parseFloat(r.dollarAmount),a=parseFloat(r.exchangeRate),s=Math.round(t*a),n=Math.round(p),c=s-n;i("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ",`Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‚Ø¯ÙŠ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ ØºÙŠØ± ÙƒØ§ÙÙŠ. Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: ${s.toLocaleString()} Ø¯.Ø¹ØŒ Ø§Ù„Ù…ØªØ§Ø­: ${n.toLocaleString()} Ø¯.Ø¹ØŒ Ø§Ù„Ù†Ù‚Øµ: ${c.toLocaleString()} Ø¯.Ø¹`)}return}N(!0);try{const t=await fetch("/employee/buy",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({dollarAmount:r.dollarAmount,exchangeRate:r.exchangeRate,documentNumber:r.documentNumber,notes:r.notes})});if(t.ok){const a=await t.json();$(a.new_dollar_balance),E(a.new_iqd_balance),B(a.new_cash_balance),a.new_cash_balance!==void 0&&O(a.new_cash_balance),a.new_central_dollar_balance!==void 0&&P(a.new_central_dollar_balance),a.updated_report&&I({charges:a.updated_report.charges,payments:a.updated_report.payments,operations:a.updated_report.operations,dollars_bought:a.updated_report.dollars_bought}),b(d=>({...d,dollarAmount:"",notes:"",currentTime:new Date().toLocaleString("ar-EG")}));const s=new Date,n=s.getFullYear().toString()+(s.getMonth()+1).toString().padStart(2,"0")+s.getDate().toString().padStart(2,"0"),c=Math.floor(Math.random()*1e3).toString().padStart(3,"0");S(`BUY${n}${c}`),_(s.toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),K("ØªÙ… Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!","ØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø±ØµØ¯Ø© Ø¨Ù†Ø¬Ø§Ø­")}else{const a=await t.json();i("ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©",a.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹")}}catch(t){console.error("Error:",t),i("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©","ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}finally{N(!1)}},ge=()=>{me()},he=async()=>{if(!v()){if(!r.dollarAmount||parseFloat(r.dollarAmount)<=0)i("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª","ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©");else if(!r.exchangeRate||parseFloat(r.exchangeRate)<=0)i("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª","ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø³Ø¹Ø± ØµØ±Ù ØµØ­ÙŠØ­");else{const t=parseFloat(r.dollarAmount),a=parseFloat(r.exchangeRate),s=Math.round(t*a),n=Math.round(p),c=s-n;i("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ",`Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‚Ø¯ÙŠ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ ØºÙŠØ± ÙƒØ§ÙÙŠ. Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: ${s.toLocaleString()} Ø¯.Ø¹ØŒ Ø§Ù„Ù…ØªØ§Ø­: ${n.toLocaleString()} Ø¯.Ø¹ØŒ Ø§Ù„Ù†Ù‚Øµ: ${c.toLocaleString()} Ø¯.Ø¹`)}return}N(!0);try{const t=await fetch("/employee/buy",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({dollarAmount:r.dollarAmount,exchangeRate:r.exchangeRate,documentNumber:r.documentNumber,notes:r.notes})});if(t.ok){const a=await t.json();if($(a.new_dollar_balance),E(a.new_iqd_balance),B(a.new_cash_balance),a.new_cash_balance!==void 0&&O(a.new_cash_balance),a.new_central_dollar_balance!==void 0&&P(a.new_central_dollar_balance),a.updated_report&&I({charges:a.updated_report.charges,payments:a.updated_report.payments,operations:a.updated_report.operations,dollars_bought:a.updated_report.dollars_bought}),(await ne({reference_number:r.documentNumber,dollar_amount:parseFloat(r.dollarAmount),exchange_rate:parseFloat(r.exchangeRate),iqd_amount:M(),total_amount:xe(),notes:r.notes,customer_phone:null})).success){b(f=>({...f,dollarAmount:"",notes:"",currentTime:new Date().toLocaleString("ar-EG")}));const n=new Date,c=n.getFullYear().toString()+(n.getMonth()+1).toString().padStart(2,"0")+n.getDate().toString().padStart(2,"0"),d=Math.floor(Math.random()*1e3).toString().padStart(3,"0");S(`BUY${c}${d}`),_(n.toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),K("ØªÙ… Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!","ØªÙ… Ø¥Ø¬Ø±Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©")}else ce("ØªØ­Ø°ÙŠØ±","ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù„ÙƒÙ† ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø©")}else{const a=await t.json();i("ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©",a.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹")}}catch(t){console.error("Error:",t),i("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©","ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰")}finally{N(!1)}},ue=()=>{ye.visit("/employee/dashboard")},pe=async(t=1)=>{Y(!0);try{const a=await fetch("/employee/buy/detailed-report",{method:"GET",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(a.ok){const s=await a.json();if(s.success){const n=s.report.buy_transactions||[],c=Math.ceil(n.length/m),d=(t-1)*m,f=d+m,fe=n.slice(d,f);U({...s.report,buy_transactions:fe,all_transactions:n}),se(c),G(t)}else i("Ø®Ø·Ø£","ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…ÙØµÙ„")}else i("Ø®Ø·Ø£","ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…ÙØµÙ„")}catch(a){console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚Ø±ÙŠØ±:",a),i("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©","ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…")}finally{Y(!1)}},w=t=>{if(t>=1&&t<=g&&l){const a=l.all_transactions||[],s=(t-1)*m,n=s+m,c=a.slice(s,n);U({...l,buy_transactions:c}),G(t)}},be=async()=>{R(!0),l||await pe(1)};return e.jsxs(je,{title:"Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:ue,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors duration-200 shadow-md",children:[e.jsx("span",{children:"â†"}),e.jsx("span",{children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"w-20 h-20 bg-cyan-100 rounded-full flex items-center justify-center mx-auto mb-3",children:[e.jsx("img",{src:"/images/services/buy.png",alt:"Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±",className:"w-12 h-12 object-contain",onError:t=>{t.target.style.display="none",t.target.nextSibling.style.display="block"}}),e.jsx("span",{className:"text-2xl text-cyan-600 hidden",children:"ğŸ›’"})]}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"bg-cyan-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-cyan-800 mb-2",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ (Ø¯ÙˆÙ„Ø§Ø±)"}),e.jsxs("p",{className:"text-3xl font-bold text-cyan-700",children:["$",Math.floor(Z).toLocaleString()]})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‚Ø¯ÙŠ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ"}),e.jsxs("p",{className:"text-3xl font-bold text-green-700",children:[Math.floor(p).toLocaleString()," Ø¯.Ø¹"]})]})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠ"}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±:"}),e.jsxs("span",{className:"font-bold text-gray-800",children:["$",D>0?Math.floor(D).toLocaleString():"0"]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±:"}),e.jsxs("span",{className:"font-bold text-gray-800",children:[k>0?Math.floor(k).toLocaleString():"0"," Ø¯.Ø¹"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Ù†Ù‚Ø¯ÙŠ:"}),e.jsxs("span",{className:"font-bold text-gray-800",children:[T>0?Math.floor(T).toLocaleString():"0"," Ø¯.Ø¹"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"}),e.jsx("div",{className:"bg-red-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-red-700",children:"Ù…Ù†ØµØ±Ù:"}),e.jsxs("span",{className:"font-bold text-red-800",children:[u.charges>0?Math.floor(u.charges).toLocaleString():"0"," Ø¯.Ø¹"]})]})}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Ø¯ÙˆÙ„Ø§Ø± Ù…Ø´ØªØ±Ù‰:"}),e.jsxs("span",{className:"font-bold text-blue-800",children:[u.dollars_bought>0?Math.floor(u.dollars_bought).toLocaleString():"0"," $"]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-700",children:"Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:"}),e.jsx("span",{className:"font-bold text-gray-800",children:u.operations})]})})]}),e.jsx("button",{onClick:be,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-4 rounded-xl transition-colors duration-200 mt-6",children:"ØªÙ‚Ø±ÙŠØ± Ù…ÙØµÙ„"})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹:"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-right",value:r.documentNumber,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª:"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-right",value:ee,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ù…Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-right bg-gray-50",value:L?.name||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±:"}),e.jsx("input",{type:"text",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-right ${C()?"border-red-500 bg-red-50":"border-gray-300"}`,placeholder:"Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±",value:r.dollarAmount?W(r.dollarAmount):"",onChange:t=>J("dollarAmount",t.target.value)}),C()&&e.jsx("p",{className:"text-xs text-red-600 mt-1 text-right font-medium",children:C()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù:"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-right",placeholder:`Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ: ${Math.floor(F).toLocaleString()}`,value:r.exchangeRate?W(r.exchangeRate):"",onChange:t=>J("exchangeRate",t.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsx("div",{className:"bg-cyan-50 rounded-xl p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-semibold text-cyan-700",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±"}),e.jsxs("p",{className:"text-xl font-bold text-cyan-800",children:["$",Math.floor(parseFloat(r.dollarAmount||0)).toLocaleString()]})]})}),e.jsx("div",{className:"bg-orange-50 rounded-xl p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-semibold text-orange-700",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±"}),e.jsxs("p",{className:"text-xl font-bold text-orange-800",children:[Math.floor(M()).toLocaleString()," Ø¯.Ø¹"]})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2 text-right",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª:"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent text-right",rows:"3",placeholder:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©...",value:r.notes,onChange:t=>de("notes",t.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:he,disabled:j||!v(),className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200 flex items-center justify-center",children:[e.jsx("span",{className:"ml-2",children:"ğŸ“„"}),j?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...":"Ø­ÙØ¸ ÙˆØ·Ø¨Ø§Ø¹Ø©"]}),e.jsxs("button",{onClick:ge,disabled:j||!v(),className:"bg-cyan-500 hover:bg-cyan-600 disabled:bg-gray-400 text-white font-semibold py-3 px-6 rounded-xl transition-colors duration-200 flex items-center justify-center",children:[e.jsx("span",{className:"ml-2",children:"ğŸ’¾"}),j?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...":"Ø­ÙØ¸"]})]})]})})]})]}),re&&V&&e.jsx(ve,{receiptData:V,onClose:le,onPrint:oe}),e.jsx(Re,{isOpen:h.isOpen,type:h.type,title:h.title,message:h.message,autoClose:h.autoClose,autoCloseDelay:h.autoCloseDelay,onClose:ie}),te&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-4 rounded-t-2xl",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:"ğŸ“Š"}),"Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…ÙØµÙ„ - Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±Ø§Ø¡"]}),e.jsx("button",{onClick:()=>R(!1),className:"text-white hover:text-gray-200 text-3xl font-bold transition-colors duration-200",children:"Ã—"})]})}),e.jsx("div",{className:"p-6 bg-gray-50",children:ae?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±..."})]})}):l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-cyan-50 to-cyan-100 rounded-xl p-4 border border-cyan-200",children:[e.jsx("div",{className:"text-sm font-medium text-cyan-700 mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠ (Ø¯ÙˆÙ„Ø§Ø±)"}),e.jsxs("div",{className:"text-2xl font-bold text-cyan-900",children:["$",Math.floor(l.opening_dollar_balance||0).toLocaleString()]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø¯ÙˆÙ„Ø§Ø±)"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:["$",Math.floor(l.current_dollar_balance||0).toLocaleString()]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-4 border border-orange-200",children:[e.jsx("div",{className:"text-sm font-medium text-orange-700 mb-1",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ø§Ù„Ù…Ø´ØªØ±Ø§Ø©"}),e.jsxs("div",{className:"text-2xl font-bold text-orange-900",children:["$",Math.floor(l.total_dollars_bought||0).toLocaleString()]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border border-red-200",children:[e.jsx("div",{className:"text-sm font-medium text-red-700 mb-1",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„Ù…ØµØ±ÙˆÙ"}),e.jsxs("div",{className:"text-2xl font-bold text-red-900",children:[Math.floor(l.total_iqd_spent||0).toLocaleString()," Ø¯.Ø¹"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700 mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠ (Ø¯ÙŠÙ†Ø§Ø±)"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:[Math.floor(l.opening_iqd_balance||0).toLocaleString()," Ø¯.Ø¹"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-xl p-4 border border-indigo-200",children:[e.jsx("div",{className:"text-sm font-medium text-indigo-700 mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø¯ÙŠÙ†Ø§Ø±)"}),e.jsxs("div",{className:"text-2xl font-bold text-indigo-900",children:[Math.floor(l.current_iqd_balance||0).toLocaleString()," Ø¯.Ø¹"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:[e.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©"}),e.jsxs("div",{className:"text-2xl font-bold text-green-900",children:[Math.floor(l.total_commission||0).toLocaleString()," Ø¯.Ø¹"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:l.total_operations||0})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-500 to-blue-600 px-6 py-3 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"ØªÙØ§ØµÙŠÙ„ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±Ø§Ø¡"}),e.jsxs("div",{className:"text-sm text-white",children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª: ",l.all_transactions?.length||0]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Ù…Ø¨Ù„Øº Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ÙƒÙ„ÙŠ"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.buy_transactions&&l.buy_transactions.length>0?l.buy_transactions.map((t,a)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:t.reference_number||"-"}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-cyan-700 font-semibold",children:["$",Math.floor(t.dollar_amount||0).toLocaleString()]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:Math.floor(t.exchange_rate||0).toLocaleString()}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-orange-700 font-semibold",children:[Math.floor(t.iqd_amount||0).toLocaleString()," Ø¯.Ø¹"]}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-red-700 font-semibold",children:[Math.floor(t.total_amount||0).toLocaleString()," Ø¯.Ø¹"]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleString("ar-EG")}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 max-w-xs truncate",children:t.notes||"-"})]},a)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø´Ø±Ø§Ø¡ Ù…Ø³Ø¬Ù„Ø©"})})})]})}),g>1&&e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["ØµÙØ­Ø© ",e.jsx("span",{className:"font-semibold",children:x})," Ù…Ù†"," ",e.jsx("span",{className:"font-semibold",children:g})," ","(Ø¹Ø±Ø¶ ",m," Ù…Ø¹Ø§Ù…Ù„Ø© Ù„ÙƒÙ„ ØµÙØ­Ø©)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w(1),disabled:x===1,className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Ø§Ù„Ø£ÙˆÙ„Ù‰"}),e.jsx("button",{onClick:()=>w(x-1),disabled:x===1,className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©"}),e.jsx("button",{onClick:()=>w(x+1),disabled:x===g,className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Ø§Ù„ØªØ§Ù„ÙŠØ©"}),e.jsx("button",{onClick:()=>w(g),disabled:x===g,className:"px-3 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Ø§Ù„Ø£Ø®ÙŠØ±Ø©"})]})]})})]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsxs("button",{onClick:()=>R(!1),className:"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-semibold py-3 px-8 rounded-xl transition-all duration-200 flex items-center shadow-lg",children:[e.jsx("span",{className:"mr-2",children:"âœ–ï¸"}),"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªÙ‚Ø±ÙŠØ±"]})})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600 text-lg",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©"})})})]})})]})}export{Ie as default};
